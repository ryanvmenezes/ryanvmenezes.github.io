<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>The Champions League draw, simulated | Ryan Menezes</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="/css/extra.css" />
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">Blogs</a></li>
      
      <li><a href="/about/">About</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">The Champions League draw, simulated</span></h1>
<h2><span class="subhead">Or: How I learned to embrace (and simulate) semi-random playoffs</span></h2>
<h2 class="author">Ryan Menezes</h2>
<h2 class="date">2019-12-15</h2>
</div>

<main>

<link href="/rmarkdown-libs/pagedtable/css/pagedtable.css" rel="stylesheet" />
<script src="/rmarkdown-libs/pagedtable/js/pagedtable.js"></script>


<!-- About a year ago, I had a thought that turned into a quick analysis, which I summarized in this tweet: -->
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">File under &quot;Extremely random analyses&quot;: Probabilities (in %) of matchups for Champions League knockout round across 1 million simulations. Draw is in a few hours. Three English teams finishing as runners-up makes the makes the distribution of possibilities a little lopsided. <a href="https://t.co/mOV1D6oPLn">pic.twitter.com/mOV1D6oPLn</a></p>&mdash; Ryan Menezes (@ryanvmenezes) <a href="https://twitter.com/ryanvmenezes/status/1074556953190256640?ref_src=twsrc%5Etfw">December 17, 2018</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<!-- As someone who grew up watching a truly absurd amount of American sports, I'm learning a lot. -->
<!-- Imagine Major League Baseball instituted a playoff series where each team hosts one game and the winner is decided by the total number of runs scored. I think this has a low chance of happening. But if it did, it surely would make the latter innings of every game meaningful. -->
<!-- But it occurred to me that the possible matchups in the UEFA Champions League draw are not all equally likely. The draw has two rules: Teams who were in the same group one round earlier can't be drawn against each other, and neither can teams from the same country. After the winners advance from this round, things get truly random, and you can get  -->
<!-- On a side note, I now find Wikipedia's use of a [bracket](https://en.wikipedia.org/wiki/2016%E2%80%9317_UEFA_Champions_League_knockout_phase#Bracket) to illustrate the knockout round very misleading. For years I stared at it thinking that group winners and runners-up were placed in a bracket  -->
<pre class="r"><code>library(furrr)
library(tidyverse)
library(formattable)</code></pre>
<p>Create the data.</p>
<pre class="r"><code>teams = tibble(
  team = c(
    &#39;PSG|a|w|fra&#39;,
    &#39;Bayern|b|w|ger&#39;,
    &#39;City|c|w|eng&#39;,
    &#39;Juve|d|w|ita&#39;,
    &#39;Liverpool|e|w|eng&#39;,
    &#39;Barca|f|w|esp&#39;,
    &#39;Leipzig|g|w|ger&#39;,
    &#39;Valencia|h|w|esp&#39;,
    &#39;Real|a|r|esp&#39;,
    &#39;Spurs|b|r|eng&#39;,
    &#39;Atalanta|c|r|ita&#39;,
    &#39;Atletico|d|r|esp&#39;,
    &#39;Napoli|e|r|ita&#39;,
    &#39;Dortmund|f|r|ger&#39;,
    &#39;Lyon|g|r|fra&#39;,
    &#39;Chelsea|h|r|eng&#39;
  )
) %&gt;% 
  separate(team, into = c(&#39;team&#39;, &#39;group&#39;, &#39;finish&#39;, &#39;country&#39;))

teams</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["team"],"name":[1],"type":["chr"],"align":["left"]},{"label":["group"],"name":[2],"type":["chr"],"align":["left"]},{"label":["finish"],"name":[3],"type":["chr"],"align":["left"]},{"label":["country"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"PSG","2":"a","3":"w","4":"fra"},{"1":"Bayern","2":"b","3":"w","4":"ger"},{"1":"City","2":"c","3":"w","4":"eng"},{"1":"Juve","2":"d","3":"w","4":"ita"},{"1":"Liverpool","2":"e","3":"w","4":"eng"},{"1":"Barca","2":"f","3":"w","4":"esp"},{"1":"Leipzig","2":"g","3":"w","4":"ger"},{"1":"Valencia","2":"h","3":"w","4":"esp"},{"1":"Real","2":"a","3":"r","4":"esp"},{"1":"Spurs","2":"b","3":"r","4":"eng"},{"1":"Atalanta","2":"c","3":"r","4":"ita"},{"1":"Atletico","2":"d","3":"r","4":"esp"},{"1":"Napoli","2":"e","3":"r","4":"ita"},{"1":"Dortmund","2":"f","3":"r","4":"ger"},{"1":"Lyon","2":"g","3":"r","4":"fra"},{"1":"Chelsea","2":"h","3":"r","4":"eng"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>

</main>

  <footer>
  
  
  </footer>
  </body>
</html>

